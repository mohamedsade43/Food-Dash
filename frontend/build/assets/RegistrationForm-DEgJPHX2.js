import{r as a,c as A,d as R,u as D,a as E,s as h,B as t,j as e,H as F}from"./index-V3xU5zvR.js";import I from"./Footer-BVCtypdT.js";const G=()=>{const[c,x]=a.useState(""),[l,y]=a.useState(""),[i,b]=a.useState(""),[u,w]=a.useState(""),[g,j]=a.useState(null),[o,k]=a.useState(!1),[m,v]=a.useState(""),{userInfo:f}=A(r=>r.auth),[N]=R(),n=D(),p=E();a.useEffect(()=>{f&&n("/"),window.google.accounts.id.initialize({client_id:"1029530702254-5n6cvus03bri08fcgd0lrqmumtblrqu9.apps.googleusercontent.com",callback:S}),window.google.accounts.id.renderButton(document.getElementById("googleSignInDiv"),{theme:"outline",size:"large"}),window.google.accounts.id.prompt()},[n,f]);const S=async r=>{try{const s=await(await fetch("/api/users/google-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tokenId:r.credential})})).json();s.success?(p(h({...s})),n("/"),t.success("Registered with Google!")):t.error(s.message)}catch{t.error("Google registration failed!")}},C=r=>{j(r.target.files[0])},P=async r=>{var d;if(r.preventDefault(),i!==u)t.error("Passwords do not match");else try{const s=new FormData;s.append("name",c),s.append("email",l),s.append("password",i),g&&s.append("profilePicture",g),o&&(s.append("isAdmin",!0),s.append("adminKey",m));const q=await N(s).unwrap();p(h(q)),n("/")}catch(s){t.error(((d=s==null?void 0:s.data)==null?void 0:d.message)||s.error)}};return e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background text-text dark:bg-background-dark dark:text-text-dark p-4",children:e.jsxs("div",{className:"w-full max-w-sm p-8 space-y-6 bg-background dark:bg-gray-800 rounded-lg shadow-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-red-600 dark:text-red-400",children:"Register"}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:c,onChange:r=>x(r.target.value),required:!0,placeholder:"Name",className:"w-full px-4 py-3 border bg-gray-100 dark:bg-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 dark:focus:ring-red-400"})}),e.jsx("div",{children:e.jsx("input",{type:"email",value:l,onChange:r=>y(r.target.value),required:!0,placeholder:"Email",className:"w-full px-4 py-3 border bg-gray-100 dark:bg-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 dark:focus:ring-red-400"})}),e.jsx("div",{children:e.jsx("input",{type:"password",value:i,onChange:r=>b(r.target.value),required:!0,placeholder:"Password",className:"w-full px-4 py-3 border bg-gray-100 dark:bg-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 dark:focus:ring-red-400"})}),e.jsx("div",{children:e.jsx("input",{type:"password",value:u,onChange:r=>w(r.target.value),required:!0,placeholder:"Confirm Password",className:"w-full px-4 py-3 border bg-gray-100 dark:bg-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 dark:focus:ring-red-400"})}),e.jsx("div",{children:e.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"w-full px-4 py-3 border bg-gray-100 dark:bg-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 dark:focus:ring-red-400"})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:()=>k(!o),className:"w-4 h-4 text-red-500 border-gray-300 rounded focus:ring-red-400"}),e.jsx("label",{htmlFor:"isAdmin",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"Register as Admin"})]}),o&&e.jsx("div",{children:e.jsx("input",{type:"text",value:m,onChange:r=>v(r.target.value),required:!0,placeholder:"Admin Key",className:"w-full px-4 py-3 border bg-gray-100 dark:bg-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 dark:focus:ring-red-400"})}),e.jsx("button",{type:"submit",className:"w-full py-3 mt-4 text-white bg-red-500 rounded-lg shadow-lg hover:bg-red-600 dark:bg-red-700 dark:hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-400",children:"Register"})]}),e.jsx("div",{id:"googleSignInDiv",className:"flex items-center justify-center w-full py-3 mt-2"})]})}),e.jsx(I,{})]})};export{G as default};
